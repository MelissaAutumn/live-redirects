Listen 88
NameVirtualHost *:88
<VirtualHost *:88>
  ServerName live.mozillamessaging.com
  CustomLog logs/live.mozillamessaging.com.access_log combined env=!dontlog
  ErrorLog logs/live.mozillamessaging.com.error_log

  ExpiresActive On
  ExpiresDefault "now plus 6 hours"

  <Location /thunderbird/start>
    RewriteEngine On

    #Thunderbird 10.0.7
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 14.0
    RewriteCond %{QUERY_STRING} (^|&)version=(14.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.6
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 15.0
    RewriteCond %{QUERY_STRING} (^|&)version=(15.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/beta/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 13.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(13.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.5
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 13.0
    RewriteCond %{QUERY_STRING} (^|&)version=(13.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 12.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(12.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 12.0
    RewriteCond %{QUERY_STRING} (^|&)version=(12.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 11.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(11.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 11.0
    RewriteCond %{QUERY_STRING} (^|&)version=(11.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.4
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.3
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.20
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.20)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.19
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.19)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.18
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.18)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 9.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(9.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 9.0
    RewriteCond %{QUERY_STRING} (^|&)version=(9.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/release/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.17
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.17)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.16
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.16)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 8.0
    RewriteCond %{QUERY_STRING} (^|&)version=(8.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/8.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 7.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(7.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/7.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 7.0
    RewriteCond %{QUERY_STRING} (^|&)version=(7.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/7.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.15
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.15)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.14
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.14)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.13
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.13)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.12
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.12)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/5.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0b2
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0b2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/%2/thunderbird/5.0b2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.11
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.11)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0b1
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0b1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/%2/thunderbird/5.0b1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.10
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.10)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3a3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a3/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.9
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.9)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.8
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.8)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3a2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.x EOL
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0(?:.\d+)?pre)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/eol/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.11
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.11)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.11/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.7
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.10
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.10)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.10/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.6
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.5
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.9
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.9)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.9/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.1 build1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20100701152743|20100701181850|20100701155236)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/nightly/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]
    
    #Thunderbird 3.1.4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]
    
    #Thunderbird 3.1 RC1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20100526043820|20100526130412|20100526103039)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1rc1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 (and RC2)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.8
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.8)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.8/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.7
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.7/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.6
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.6/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.5
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.5/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.4/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.3/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 RC2
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20091130201643|20091130195224|20091130225757)($|&)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2rc2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 RC1
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20091112084939|20091112114927|20091112083919|20091117133512|20091117170600|20091117135707|20091121181041|20091121212410|20091121183158)($|&)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2rc1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Alpha 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1a1)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Beta 2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1b2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1b2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Beta 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1b1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1b1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b4)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b3)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b2)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b1)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Alpha 3
    #The locale bit is to work around a bug in some urls (?locale=en-USversion=3.0a3) in some builds
    RewriteCond %{QUERY_STRING} (&|locale=[a-zA-Z-]+)?version=(3.0a3)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3 Alpha 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]
      
    #Thunderbird Earlybird
    RewriteCond %{QUERY_STRING} (^|&)version=(\d{1,2}\.\da2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/earlybird/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Everything else is considered a nightly
    RewriteRule .* https://www.mozilla.org/en-US/thunderbird/nightly/start/?uri=%{REQUEST_URI} [QSA,R=302] 
  </Location>
  <Location /thunderbird/firstrun>
    RewriteEngine On

    #Thunderbird 3.1.20
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.20)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.19
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.19)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.18
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.18)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.17
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.17)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.16
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.16)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 8.0
    RewriteCond %{QUERY_STRING} (^|&)version=(8.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/8.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 7.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(7.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/7.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 7.0
    RewriteCond %{QUERY_STRING} (^|&)version=(7.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/7.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.15
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.15)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.14
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.14)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.13
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.13)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.12
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.12)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/en-US/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/5.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0b2
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0b2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/%2/thunderbird/5.0b2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.11
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.11)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0b1
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0b1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/%2/thunderbird/5.0b1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.10
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.10)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3a3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a3/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.9
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.9)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.8
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.8)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3a2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.11
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.11)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.11/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.7
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.10
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.10)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.10/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.6
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.5
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.9
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.9)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.9/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.1 build1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20100701152743|20100701181850|20100701155236)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/nightly/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 RC1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20100526043820|20100526130412|20100526103039)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1rc1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 (and RC2)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.8
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.8)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.8/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.7
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.7/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.6
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.6/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.5
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.5/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.4/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.3/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 RC2
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20091130201643|20091130195224|20091130225757)($|&)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2rc2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 RC1
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20091112084939|20091112114927|20091112083919|20091117133512|20091117170600|20091117135707|20091121181041|20091121212410|20091121183158)($|&)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2rc1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Beta 2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1b2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1b2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Beta 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1b1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1b1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Alpha 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1a1)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b4)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b3)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b2)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b1)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Alpha 3
    #The locale bit is to work around a bug in some urls (?locale=en-USversion=3.0a3) in some builds
    RewriteCond %{QUERY_STRING} (&|locale=[a-zA-Z-]+)?version=(3.0a3)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3 Alpha 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a1/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird Earlybird
    RewriteCond %{QUERY_STRING} (^|&)version=(\d{1,2}\.\da2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/earlybird/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Everything else is considered a nightly
    RewriteRule .* https://www.mozilla.org/en-US/thunderbird/nightly/start/?uri=%{REQUEST_URI} [QSA,R=302] 
  </Location>
  <Location /thunderbird/whatsnew>
    RewriteEngine On

    #Thunderbird 10.0.7
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 14.0
    RewriteCond %{QUERY_STRING} (^|&)version=(14.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/14.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.6
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 15.0
    RewriteCond %{QUERY_STRING} (^|&)version=(15.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/15.0beta/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 13.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(13.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/13.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.5
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 13.0
    RewriteCond %{QUERY_STRING} (^|&)version=(13.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/13.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 12.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(12.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/12.0.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 12.0 (redirect to releasenotes as a one-off)
    RewriteCond %{QUERY_STRING} (^|&)version=(12.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/12.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 11.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(11.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/11.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 11.0
    RewriteCond %{QUERY_STRING} (^|&)version=(11.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/11.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.4
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.3
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.20
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.20)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.19
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.19)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.18
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.18)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 9.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(9.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/9.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 9.0
    RewriteCond %{QUERY_STRING} (^|&)version=(9.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/9.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.17
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.17)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.16
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.16)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 8.0
    RewriteCond %{QUERY_STRING} (^|&)version=(8.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/8.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 7.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(7.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/7.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 7.0
    RewriteCond %{QUERY_STRING} (^|&)version=(7.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/7.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.15
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.15)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.14
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.14)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.13
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.13)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.12
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.12)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/en-US/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/5.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0b2
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0b2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/%2/thunderbird/5.0b2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.11
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.11)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0b1
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0b1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/%2/thunderbird/5.0b1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.10
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.10)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3a3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a3/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.9
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.9)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.8
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.8)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3a2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.x EOL
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0(?:.\d+)?pre)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/eol/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.11
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.11)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.11/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.7
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.10
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.10)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.10/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.6
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.5
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.9
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.9)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.9/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.1 build1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20100701152743|20100701181850|20100701155236)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/nightly/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 RC1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20100526043820|20100526130412|20100526103039)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1rc1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 RC2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.8
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.8)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.8/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.7
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.7/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.6
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.6/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.5
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.5/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]
    
    #Thunderbird 3.0.4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.4/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.3/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 RC2
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20091130201643|20091130195224|20091130225757)($|&)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2rc2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 RC1
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20091112084939|20091112114927|20091112083919|20091117133512|20091117170600|20091117135707|20091121181041|20091121212410|20091121183158)($|&)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2rc1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Beta 2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1b2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1b2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Beta 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1b1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1b1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Alpha 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1a1)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b4)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b3)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b2)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b1)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Alpha 3
    #The locale bit is to work around a bug in some urls (?locale=en-USversion=3.0a3) in some builds
    RewriteCond %{QUERY_STRING} (&|locale=[a-zA-Z-]+)?version=(3.0a3)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/start/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3 Alpha 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a1/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird Earlybird
    RewriteCond %{QUERY_STRING} (^|&)version=(\d{1,2}\.\da2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/earlybird/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Everything else is considered a nightly
    RewriteRule .* https://www.mozilla.org/en-US/thunderbird/nightly/whatsnew/?uri=%{REQUEST_URI} [QSA,R=302] 
  </Location>

  <Location /thunderbird/releasenotes>
    RewriteEngine On

    #Thunderbird 10.0.7
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0.7/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 14.0
    RewriteCond %{QUERY_STRING} (^|&)version=(14.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/14.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.6
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0.6/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 15.0
    RewriteCond %{QUERY_STRING} (^|&)version=(15.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/15.0beta/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 13.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(13.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/13.0.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.5
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0.5/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 13.0
    RewriteCond %{QUERY_STRING} (^|&)version=(13.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/13.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 12.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(12.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/12.0.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 12.0
    RewriteCond %{QUERY_STRING} (^|&)version=(12.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/12.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 11.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(11.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/11.0.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 11.0
    RewriteCond %{QUERY_STRING} (^|&)version=(11.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/11.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.4
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0.4/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.3
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0.3/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.20
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.20)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1.20/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0.2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.19
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.19)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1.19/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 10.0
    RewriteCond %{QUERY_STRING} (^|&)version=(10.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/10.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.18
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.18)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1.18/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 9.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(9.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/9.0.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 9.0
    RewriteCond %{QUERY_STRING} (^|&)version=(9.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/9.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.17
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.17)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1.17/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.16
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.16)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1.16/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 8.0
    RewriteCond %{QUERY_STRING} (^|&)version=(8.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/8.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 7.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(7.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/7.0.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 7.0
    RewriteCond %{QUERY_STRING} (^|&)version=(7.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/7.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.15
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.15)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/3.1.15/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.14
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.14)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1.14/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0.2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.13
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.13)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1.13/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.12
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.12)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozilla.org/%2/thunderbird/3.1.12/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 6.0
    RewriteCond %{QUERY_STRING} (^|&)version=(6.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/6.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozilla.org/%2/thunderbird/5.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0b2
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0b2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/%2/thunderbird/5.0b2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.11
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.11)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.11/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 5.0b1
    RewriteCond %{QUERY_STRING} (^|&)version=(5.0b1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* https://www.mozillamessaging.com/%2/thunderbird/5.0b1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.10
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.10)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.10/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3a3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a3/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.9
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.9)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.9/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.8
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.8)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.8/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3a2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.11
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.11)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.11/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.7
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.7/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.10
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.10)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.10/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.6
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.6/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.5
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.5/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.9
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.9)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.9/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.1 build1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20100701152743|20100701181850|20100701155236)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/nightly/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.3/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1.4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1.4/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 RC1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20100526043820|20100526130412|20100526103039)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1rc1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 (and RC2)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.8
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.8)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.8/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.7
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.7)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.7/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.6
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.6)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.6/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.5
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.5)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.5/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.4)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.4/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.3)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.3/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0.1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0.1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0.1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 RC2
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20091130201643|20091130195224|20091130225757)($|&)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2rc2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 RC1
    RewriteCond %{QUERY_STRING} (^|&)buildid=(20091112084939|20091112114927|20091112083919|20091117133512|20091117170600|20091117135707|20091121181041|20091121212410|20091121183158)($|&)
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2rc1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.0
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.0/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Beta 2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1b2)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1b2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Beta 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1b1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.1b1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.1 Alpha 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.1a1)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 4
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b4)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 3
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b3)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 2
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b2)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3 Beta 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.0b1)($|&)
      RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/%2/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Thunderbird 3.3 Alpha 1
    RewriteCond %{QUERY_STRING} (^|&)version=(3.3a1)($|&)
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
      RewriteRule .* http://www.mozillamessaging.com/%2/thunderbird/3.3a1/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302,L]

    #Everything is considered a nightly
    RewriteRule .* https://www.mozilla.org/en-US/thunderbird/nightly/releasenotes/?uri=%{REQUEST_URI} [QSA,R=302] 
  </Location>

  <Location /survey/cancel/>
    RewriteEngine On
    RewriteRule .* http://www.surveygizmo.com/s/257775/thunderbird-3-cancel-install-survey [R=302]
  </Location>

  <Location /survey/uninstall/>
    RewriteEngine On
    RewriteRule .* http://www.surveygizmo.com/s/260450/thunderbird-3-uninstall-survey [R=302]
  </Location>
  
  <Location /thunderbird/snippet>
    RewriteEngine On

    #Everything is considered a nightly
    RewriteRule .* http://www.mozillamessaging.com/en-US/thunderbird/nightly/snippet/?uri=%{REQUEST_URI} [QSA,R=302] 
  </Location>
  
  <Location /thunderbird/plugin-crashed>
    RewriteEngine On
    RewriteCond %{QUERY_STRING} (^|&)locale=([^?&]+)($|&)
    RewriteRule .* https://support.mozillamessaging.com/%2/kb/plugin-crash-reports?uri=%{REQUEST_URI} [QSA,R=302] 
  </Location>

  <Location /autoconfig>
      RedirectMatch /autoconfig/(.*) https://autoconfig-live.mozillamessaging.com/autoconfig/$1
  </Location>

  #http://live.mozillamessaging.com/thunderbird/addons/search?q=header&locale=en-US&hver=3.0prelver=3.0pre&os=Darwin
  <Location /thunderbird/addons/search>
    RewriteEngine On
    RewriteCond &%{QUERY_STRING}&%{QUERY_STRING}&%{QUERY_STRING}&%{QUERY_STRING} &locale=([^=&]+).*&q=([^=&]+).*&hver=([^=&]+).*&lver=([^=&]+)
    RewriteRule .* https://addons.mozilla.org/%1/thunderbird/search?q=%2&appid=18&hver=%3&lver=%4 [R=302,L]
  </Location>
  
  <Location /dns/mx>
    RedirectMatch /(.*) https://mx-live.mozillamessaging.com/$1
  </Location>

</VirtualHost>

<VirtualHost *:88>
  ExpiresActive On
  ExpiresDefault "now plus 6 hours"

  ServerName support.live.mozillamessaging.com
  CustomLog logs/support.live.mozillamessaging.com.access_log combined
  ErrorLog logs/support.live.mozillamessaging.com.error_log

  <Location />
    RewriteEngine On
    RewriteRule .* http://support.mozillamessaging.com/ [R=302]
  </Location>
</VirtualHost>

<VirtualHost *:88>
  ExpiresActive On
  ExpiresDefault "now plus 6 hours"

  ServerName opensearch.live.mozillamessaging.com
    ServerAlias opensearch-live.mozillamessaging.com
  CustomLog logs/opensearch.live.mozillamessaging.com.access_log combined
  ErrorLog logs/opensearch.live.mozillamessaging.com.error_log

  # This vhost is only a ping destination for logging purposes  
  RedirectMatch 204 /search

</VirtualHost>
